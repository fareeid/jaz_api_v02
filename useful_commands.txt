-------------Powershell Commnand-----------
Environment variables
$Env:windir    --------------View
$Env:Foo = 'An example'  ----------create
$Env:MyTestEnvVariable = $null  -------delete
$env:Path.split(';') -----------View formatted path
https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_environment_variables?view=powershell-7.3 ---------More info
ni app/main.py requirements.txt
where.exe flake8   Display the path of some command e.g. flake8

-------------Docker--------------
docker --version                                                                                                                         
docker-compose --version                                                                                                                 
docker-compose logs -f                                                                                                                   
docker-compose -f docker-compose.prod.yml up -d --build
docker-compose exec db psql --username=jaz_api_v02 --dbname=jaz_api_v02
docker-compose exec web alembic init -t async migrations                                                          
docker-compose exec web alembic revision --autogenerate -m "init"  
docker-compose exec web alembic upgrade head  
docker-compose exec web alembic downgrade base
docker-compose exec web alembic stamp base
docker-compose down -v                                                                                            
docker-compose -f docker-compose.yml down -v                                                                      
docker-compose up -d --build                                                                                      
docker inspect                                                                                                    
docker inspect f            

---------------Database commands--------------
docker-compose exec web aerich init -t app.db.TORTOISE_ORM
docker-compose exec web aerich init-db
docker-compose exec web aerich upgrade
docker-compose exec web-db psql -U postgres 
docker-compose exec web-db python app/db.py

---------------Testing and coverage-------------------
docker-compose exec web python -m pytest                                            -------------- normal run
docker-compose exec web python -m pytest -p no:warnings                             -----------disable warnings
docker-compose exec web python -m pytest -k "summary and not test_read_summary"     ----------------run only the tests with names that match the string expression
docker-compose exec web python -m pytest -x                                         -----------stop the test session after the first failure
docker-compose exec web python -m pytest -x --pdb                                   -------------enter PDB after first failure then end the test session
docker-compose exec web python -m pytest --maxfail=2                                ---------------stop the test run after two failures
docker-compose exec web python -m pytest -l                                         --------------show local variables in tracebacks
docker-compose exec web python -m pytest --durations=2                              -------------list the 2 slowest tests
docker-compose exec web python -m pytest --cov="."                                 ------------- Coverage report
docker-compose exec web python -m pytest --cov="." --cov-report html

--------Code quality and formatting------------
docker-compose exec web flake8 .
docker-compose exec web black . --check
docker-compose exec web black . --diff
docker-compose exec web black .
docker-compose exec web isort . --check-only
docker-compose exec web isort . --diff
docker-compose exec web isort .

--------------Poetry--------------
poetry --info
poetry init                                                                                                       
poetry install                                                                                                    
poetry list                                                                                                       
poetry help add                                                                                                   
poetry update all                                                                                                 
poetry update pydantic                                                                                            
poetry add sqlalchemy                                                                                             
poetry add fastapi-users[sqlalchemy]                                                                              
poetry show                                                                                                       
poetry add alembic                                                                                                                                                                                  
poetry add --group dev mypy                                                                                             

-------------pip----------                                                                                                                            
pip install --no-deps ormar   
pip uninstall ormar                                                                                               
pip list                                                                                                          

-------------Git--------------
git version                                                                                                       
git init                                                                                                          
git add .                                                                                                         
git commit -m "Initial setup of jaz_api_v02"                                                                      
git remote add origin https://github.com/fareeid/jaz_api_v02.git                                                  
git branch -M main                                                                                                
git push -u origin main                                                                                           
git status                                                                                                        
git config --global user.email "faridkim@gmail.com"                                                               
git config --global user.name "Fareeid"                                                                           
git clone https://github.com/fareeid/jaz_api_v02.git

--------------Fastapi--------------
uvicorn app.main:app --reload --port=8001

--------------Conda commands-----------
cd C:\ProgramData\miniconda3\condabin>
Set-ExecutionPolicy -Scope CurrentUser -ExecutionPolicy Unrestricted
./conda init powershell -- then Restart the Powershell
conda deactivate                                                                                                  
conda remove help                                                                                                 
conda env remove --name jaz_api_v0.2                                                                              
conda deactivate                                                                                                  
conda create --name jaz_api_v0.2 python=3.11                                                                      
conda activate jaz_api_v0.2       
conda config --set auto_activate_base false    ----------- To stop conda starting by default run in powershell

psql -d database -U user -W	--------------- Connects to a database under a specific user	-d: used to state the database name -U:used to state the database user
psql -h host -d database -U user -W	--------------- Connect to a database that resides on another host	-h: used to state the host -d: used to state the database name -U:used to state the database user
psql -U user -h host “dbname=db sslmode=require”	--------------- Use SSL mode for the connection	-h: used to state the host -U:used to state the database user
\c dbname	--------------- Switch connection to a new database	 
\l	--------------- List available databases	 
\dt	--------------- List available tables	 
\d table_name	--------------- Describe a table such as a column, type, modifiers of columns, etc.	 
\dn	--------------- List all schemes of the currently connected database	 
\df	--------------- List available functions in the current database	 
\dv	--------------- List available views in the current database	 
\du	--------------- List all users and their assign roles	 
SELECT version();	--------------- Retrieve the current version of PostgreSQL server	 
\g	--------------- Execute the last command again	 
\s	--------------- Display command history	 
\s filename	--------------- Save the command history to a file	 
\i filename	--------------- Execute psql commands from a file	 
\?	--------------- Know all available psql commands	 
\h	--------------- Get help	Eg:to get detailed information on ALTER TABLE statement use the \h ALTER TABLE
\e	--------------- Edit command in your own editor	 
\a	--------------- Switch from aligned to non-aligned column output	 
\H	--------------- Switch the output to HTML format	 
\q	--------------- Exit psql shell                                             

----------------------Heroku---------------------
heroku addons:create heroku-postgresql:mini --app hidden-reef-56486
heroku addons:destroy postgresql-curly-30488
docker build -f project/Dockerfile.prod -t registry.heroku.com/hidden-reef-56486/web ./project
docker run --name fastapi-tdd -e PORT=8765 -e DATABASE_URL=sqlite://sqlite.db -p 5003:8765 registry.heroku.com/hidden-reef-56486/web:latest
docker rm fastapi-tdd -f
docker push registry.heroku.com/hidden-reef-56486/web:latest
heroku container:release web --app hidden-reef-56486
heroku run aerich upgrade --app hidden-reef-56486
https://hidden-reef-56486-d4846fb59f32.herokuapp.com/ping/
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
